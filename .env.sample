################################
# OpenAI / Realtime 設定       #
################################
# 実際の認証情報は絶対にコミットしないこと。ローカル環境でプレースホルダを置き換えるだけにする。
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_REALTIME_MODEL=gpt-realtime
OPENAI_REALTIME_TRANSCRIPTION_MODEL=gpt-4o-transcribe
OPENAI_REALTIME_VOICE=marin
# サーバー側で音声出力を無効化したい場合は true にする（Realtime音声権限がない環境向け）
OPENAI_REALTIME_AUDIO_DISABLED=false
# クライアント側で文字起こしが不要な場合は API リクエスト body の clientCapabilities.outputText=false で制御する
NEXT_PUBLIC_REALTIME_MODEL=gpt-realtime
NEXT_PUBLIC_REALTIME_TRANSCRIPTION_MODEL=gpt-4o-transcribe
NEXT_PUBLIC_REALTIME_VOICE=marin
# CORS を許可するオリジン（ブラウザ別ドメインから叩く場合に設定。未指定は * で全許可）
CORS_ALLOW_ORIGIN=

##########################
# BFF / クライアント通信  #
##########################
# Next.js の API ルート（管理用）が期待する共有シークレット。
BFF_SERVICE_SHARED_SECRET=dev-change-me
# ブラウザからBFFを叩く際に送る公開キー（プロトタイプでは共有シークレットと同一値でOK）
NEXT_PUBLIC_BFF_KEY=dev-change-me
# UI からサーバーへブラウザログを転送するための設定。デフォルト値のままでも安全。
NEXT_PUBLIC_CLIENT_LOG_ENDPOINT=/api/client-logs
NEXT_PUBLIC_CLIENT_LOG_MIRROR=true
# セッション跨ぎで使う永続メモリ（ローカルJSONストア）設定
PERSISTENT_MEMORY_ENABLED=true
PERSISTENT_MEMORY_FILE=./var/memory/persistent-memory.json
PERSISTENT_MEMORY_LIMIT=120
PERSISTENT_MEMORY_REPLAY_LIMIT=30

##########################
# MCP 接続設定            #
##########################
# 推奨: 人が読みやすい `config/mcp.servers.yaml` を利用（例は config/mcp.servers.yaml.example）。
#   リポジトリには OSS 版 Google カレンダー MCP（nspady/google-calendar-mcp）を
#   サブモジュール（external/google-calendar-mcp）として同梱し、ローカル起動する
#   デフォルト設定が含まれています。
# 別パスに置く場合は MCP_SERVERS_FILE で明示する。
MCP_SERVERS_FILE=
# フォールバックとして従来のJSON配列も利用可能（ファイルが無い場合のみ使用）
# 例: [{"id":"local-mcp","transport":"sse","url":"http://localhost:5173/mcp","headers":{"Authorization":"Bearer xxx"}}]
MCP_SERVERS=[]


##########################
# Google Calendar MCP     #
##########################
# GCP で発行した「デスクトップ アプリ」OAuth クライアントの JSON パスを指定
GOOGLE_OAUTH_CREDENTIALS=./secrets/google-oauth-desktop.json
# アクセストークン/リフレッシュトークンを保存するローカルファイルパス（パッケージ側の環境変数名に合わせる）
GOOGLE_CALENDAR_MCP_TOKEN_PATH=./secrets/google-oauth-token.json
# カレンダーAPIのスコープ（必要に応じて変更可）
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/calendar
# BFF起動時に事前接続するMCP ID（カンマ区切り）。初回ツール呼び出しの遅延を避けたい場合に設定。
MCP_EAGER_SERVERS=google-calendar
# 人名エイリアスでカレンダーIDを解決する設定（表示名:email）。複数は CALENDAR_ALIAS_* で追加。
# 例: CALENDAR_ALIAS_TOTTI="トッティさん:remote@graffity.jp"
CALENDAR_ALIAS_TOTTI=

#############################################
# Google Cloud / Gemini File Search         #
#############################################
# File Search と Drive コネクタを配置する GCP プロジェクトID。
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id
# `file-search-admin` ロール付きサービスアカウントJSONのパス。
GOOGLE_APPLICATION_CREDENTIALS=./secrets/file-search-admin.json
# 既定で参照する File Search ストアID。
GEMINI_FILE_SEARCH_DATA_STORE=projects/your-gcp-project-id/locations/us/fileStores/default-store
# 任意設定: File Search と同期する Drive フォルダIDまたは共有ドライブID。
RAG_SOURCE_DRIVE_ID=drive-folder-or-shared-drive-id

##########################
# 画像アップロード設定     #
##########################
# 保存先ディレクトリ（ローカルディスク。S3/GCSに置き換える場合は別途アダプタを実装）
IMAGE_UPLOAD_DIR=./var/uploads/images
IMAGE_UPLOAD_TARGET=local
# GCS利用時のみ必須
IMAGE_UPLOAD_GCS_BUCKET=ai-conversation-engine-uploads
# 任意: オブジェクトプレフィックス（末尾スラッシュ不要）
IMAGE_UPLOAD_GCS_PREFIX=uploads
# 許可する最大サイズ（バイト単位）デフォルト 8MB
IMAGE_UPLOAD_MAX_BYTES=8388608
# 許可するMIMEタイプ（カンマ区切り）
IMAGE_UPLOAD_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/webp,application/pdf
